<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Transfer Money</title>
    <link rel="stylesheet" th:href="@{/webjars/bootstrap/3.3.7-1/css/bootstrap.min.css}" />
    <script th:src="@{/webjars/jquery/3.1.1/jquery.min.js}"></script>
    <script th:src="@{/webjars/bootstrap/3.3.7-1/js/bootstrap.min.js}"></script>
    <link type="text/css" href="css/navbar.css" rel="stylesheet" />
    <link type="text/css" href="css/transaction.css" rel="stylesheet" />
</head>
<body>
    <div id="navbar">
        <a class="active" href="/accountOverview">Account Overview</a>
        <span id="logoNavbar"></span>
    </div>
    <h1 class="content">Transfer Money</h1>
    <h3><span th:text="${notification}"/></h3>
    <form id="form"   method="post" class="form" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">

        <!-- Deze wordt automatisch geselecteerd. Later eventueel een dropdown -->
        <label for="fromAccountNumber"><b>From Account</b></label>
        <select id="fromAccountNumber" class="balanceCheck" name="fromAccountNumber" th:value="${fromAccountNumber}">
            <option th:each="account : ${account}"  th:value="${account.accountNumber}" th:label="*{account.accountNumber} + '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Balance: â‚¬' + *{account.balance}" th:text="${account.balance}"></option>
        </select>
        <span></span>
        <span></span>
        <label for="toAccountNumber"><b>To Account</b></label>

        <input
                type="text"
                placeholder="NL12ROYA0123456789433706589"
                name="toAccountNumber"
                id="toAccountNumber"
                title="A valid account number"
                th:value="${toAccountNumber}"
                required
        />
        <span></span>
        <span id="toAccountError"> </span>

        <label for="amount"><b>Amount</b></label>
        <input
                type="number"
                placeholder="119.95"
                name="amount"
                id="amount"
                class="balanceCheck"
                title="Enter a valid amount"
                th:value="${amount}"
                step=".01"
                min="0.01"
                required
        />
        <span></span>
        <span id="amountError"></span>

        <label for="description"><b>Description</b></label>
        <input
                type="text"
                placeholder="example: Here's some money for your trip to Spain"
                name="description"
                id="description"
                title="Enter a valid description"
                th:value="${description}"
        />
        <span></span>
        <span></span>
            <td><button type="submit" name="submit" id="submitButton" disabled=true value="Send Money">Send Money</button></td>

    </form>
    <form id="accountdetailsForm" th:action="@{accountdetails}" type="get">
        <button type="button" id="backButton" value="Cancel">Cancel</button>
    </form>





</body>

<script src="js/navbar"></script>
<script src="js/transactionFieldValidation.js" defer></script>
<script defer>


        // add eventlistener to all table-cells - on click- go to account details
        document.getElementById('backButton').addEventListener("click", function(){

                let e = document.getElementById("fromAccountNumber");
                let accountnumber = e.options[e.selectedIndex].value;
                console.log(accountnumber);

                //2 - fire get request with parameter to go to account details

            let input = document.createElement("input");
            input.setAttribute("type", "hidden");
            input.setAttribute("name", "accountNumber");
            input.setAttribute("value", accountnumber);

            let form = document.getElementById("accountdetailsForm");
            form.appendChild(input);
            form.submit();


  /*             let input = $("<input>")
                    .attr("type", "hidden")
                    .attr("name", "accountNumber")
                   .attr("value", accountnumber);
                $('#accountdetailsForm').append($(input)).submit();*/
            });


</script>
</html>